# HDMI_adapter_for_MCU_on_FPGA
Подобие простейшей видеокарты с HDMI выходом на FPGA

Устройство представляет из себя видеоадаптер с разрешением 640х480 с выводом изображения через HDMI. Способ построения изображения - тайловый, благодаря чему количество необходимой видеопамяти для такого разрешения экрана удалось сократить до 16Кб. Весь экран разбит на плитки (или тайлы, знакоместа) размером 8х8 пикселов, получается 60 строк по 80 знакомест (всего - 4800 знакомест, сделано наподобии экрана NES, только немного проще). 
Изображение цветное, есть палитра из 16 цветов, но с ограничением - два цвета на знакоместо (организовано наподобие спектрумовского видеопроцессора: один из 16 цветов для INK и один из 16 цветов для PAPER, только цветов действительно 16 разных). 
Карта памяти адаптера имеет следующий вид:

0x0000 - 0x12BF: 4800 байт - номера тайлов для каждого знакомемта
0x12C0 - 0x257F: 4800 байт - атрибут цвета каждого знакоместа
0x2580 - 0x27FF: 640 байт - не используется
0x2800 - 0x2FFF: 2048 байт - первый банк с тайлами
0x3000 - 0x37FF: 2048 байт - второй банк с тайлами
0x3800 - 0x3FFF: 2048 байт - третий банк с тайлами

Память номеров тайлов и атрибутов тайлов идет непрерывно стык в стык, банки тайлов начинаются через небольшой промежуток для выравнивания начала первого банка изображения тайлов.

При начальной инициализации FPGA видеопамять инициализируется для проверки работы адаптера следующим образом: в память номеров и атрибутов тайлов записаны произвольные биты, сгенерированные случайно, в первый банк изображений тайлов записан знакогенератор ASCII (первые 128 байт с латиницей, вторые - с кирилицей). Остальные два банка - пустые, могут использоваться для изображений тайлов пользователя.

Одномоментно на экран может проецироваться только один банк тайлов.

В основе адаптера находится FPGA (в моём случае - Altera Cyclone4 EP4CE6, накупил в своё время по-дешёвке несколько штук б/у, но рабочих на Ali), в качестве видеопамяти используется встроенная в FPGA блочная память.
